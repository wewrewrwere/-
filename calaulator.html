<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>حاسبة نوح</title>
<style>
  .calIndex {
    width: 360px;
    height: 500px;
    background-color: rgb(0, 0, 0);
    border-radius: 10px;
    margin: 60px auto 40px auto;
    padding: 15px 10px;
    box-sizing: border-box;
  }

  .inputnumber {
    width: 310px;
    height: 80px;
    background-color: rgb(112, 126, 122);
    border-radius: 9px;
    border: none;
    font-size: 22px;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    color: white;
    padding: 10px;
    box-sizing: border-box;
    text-align: right;
    vertical-align: middle;
  }

  .c {
    width: 30px;
    height: 30px;
    background-color: rgb(3, 0, 184);
    border-radius: 15px;
    border: none;
    color: rgb(191, 255, 0);
    font-size: 20px;
    position: relative;
    top: 52px; /* وضعه بمستوى منتصف حقل الإدخال */
    left: 15px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .c:hover {
    background-color: rgb(231, 0, 0);
    color: rgb(255, 255, 255);
  }

  table {
    margin-top: 60px;
    width: 100%;
    border-collapse: separate;
    border-spacing: 10px 10px;
  }

  .b, .bpluse, .bmaines, .cshower {
    width: 65px;
    height: 50px;
    border-radius: 5px;
    border: none;
    font-size: 26px;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s ease;
  }

  .b {
    background-color: rgb(6, 196, 209);
  }
  .b:hover {
    background-color: rgba(94, 169, 192, 0.836);
  }

  .bpluse {
    background-color: rgba(185, 135, 26, 0.973);
    font-size: 30px;
  }
  .bpluse:hover {
    background-color: rgba(143, 104, 19, 0.973);
  }

  .bmaines {
    background-color: rgba(185, 135, 26, 0.973);
    font-size: 35px;
  }
  .bmaines:hover {
    background-color: rgba(139, 101, 19, 0.973);
  }

  .cshower {
    background-color: rgb(108, 100, 223);
  }
  .cshower:hover {
    background-color: rgb(0, 163, 114);
  }

  .body {
    background-color: rgb(67, 112, 112);
  }

  .work {
    text-align: center;
    color: #ffffff;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    font-size: 30px;
    border: none;
    display: inline-block;
    padding: 10px 20px;
    border-radius: 10px;
    position: relative;
    top: 10px;
    left: 42%;
    background-image: linear-gradient(to right, #01949eb9,  #545b9b);
  }
  .work:hover {
    background-image: linear-gradient(to right, #c2b500f8,  #cf7500);
  }

  @media (max-width: 400px) {
    .calIndex {
      width: 95%;
      height: auto;
    }
    .inputnumber {
      width: calc(100% - 50px);
      height: 60px;
      font-size: 18px;
    }
    .c {
      position: relative;
      top: 15px;
      left: 5px;
      width: 40px;
      height: 40px;
      font-size: 18px;
      
    }
    table {
      margin-top: 30px;
      border-spacing: 8px 8px;
    }
    .b, .bpluse, .bmaines, .cshower {
      width: 22%;
      height: 45px;
      font-size: 20px;
    }
    .work {
      font-size: 22px;
      left: 35%;
      top: 5px;
      padding: 8px 15px;
    }
  }
  .x{
    
    width: 30px;
    height: 30px;
   
   
    border: none;
  
    font-size: 20px;
    position: relative;
    top: 52px; /* وضعه بمستوى منتصف حقل الإدخال */
    left: 260px;
    cursor: pointer;
    transition: background-color 0.3s ease;
       background-color: rgb(253, 0, 0);
    color: rgb(255, 255, 255);
  }
  .x:hover{
    background-color: rgb(136, 35, 35);
    color: rgb(255, 255, 255);
 
  }
</style>
</head>
<body class="body">
<h2 class="work">حاسبة نوح</h2>
<div class="calIndex">
  <input class="inputnumber" type="text"  />
  <button class="c" type="button">C</button>
  <button class="x" type="button">x</button>
  <table>
    <tr>
      <td><button class="b" type="button">7</button></td>
      <td><button class="b" type="button">8</button></td>
      <td><button class="b" type="button">9</button></td>
      <td><button class="bpluse" type="button">+</button></td>
    </tr>
    <tr>
      <td><button class="b" type="button">4</button></td>
      <td><button class="b" type="button">5</button></td>
      <td><button class="b" type="button">6</button></td>
      <td><button class="bmaines" type="button">-</button></td>
    </tr>
    <tr>
      <td><button class="b" type="button">1</button></td>
      <td><button class="b" type="button">2</button></td>
      <td><button class="b" type="button">3</button></td>
      <td><button class="bmaines" type="button">*</button></td>
    </tr>
    <tr>
      <td><button class="b" type="button">0</button></td>
      <td><button class="b" type="button">.</button></td>
      <td><button class="cshower" type="button">=</button></td>
      <td><button class="bmaines" type="button">/</button></td>
    </tr>
  </table>
</div>

<script>
  const input = document.querySelector(".inputnumber");
  const buttons = document.querySelectorAll("button");
  let expression = "";

  // تحديث التعبير تلقائيًا عند أي تعديل يدوي
  input.addEventListener("input", () => {
    expression = input.value;
  });

  // التعامل مع الضغط على الأزرار
  buttons.forEach(button => {
    button.addEventListener("click", () => {
      const value = button.textContent;

      if (value === "C") {
        expression = "";
        input.value = "";
      } else if (value === "=") {
        try {
          expression = eval(expression).toString();
          input.value = expression;
        } catch {
          input.value = "خطأ";
          expression = "";
        }
      } else if (value === "x") {
        // زر لحذف آخر رقم
        const start = input.selectionStart;
        const end = input.selectionEnd;

        if (start !== end) {
          // إذا كان هناك تحديد يتم الحذف
          expression = expression.slice(0, start) + expression.slice(end);
          input.value = expression;
          input.setSelectionRange(start, start);
        } else if (start > 0) {
          // حذف حرف قبل المؤشر
          expression = expression.slice(0, start - 1) + expression.slice(end);
          input.value = expression;
          input.setSelectionRange(start - 1, start - 1);
        }
      } else {
        // إدخال القيمة في موقع المؤشر
        const start = input.selectionStart;
        const end = input.selectionEnd;ٍٍ
        const before = expression.slice(0, start);
        const after = expression.slice(end);
        expression = before + value + after;
        input.value = expression;
        input.setSelectionRange(start + value.length, start + value.length);
      }
    });
  });
</script>



</body>
</html>
